<ng-form name="subform">

  <section class="title-and-main-entry"       ng-include="'/partials/edit/bib/title_and_main_entry'"></section>
  <section class="publication-and-production" ng-include="'/partials/edit/bib/publication_and_production'"></section>
  <section class="physical-description"       ng-include="'/partials/edit/bib/physical_description'"></section>
  <section class="notes"                      ng-include="'/partials/edit/bib/notes'"></section>
  <section class="edit-subject"               ng-include="'/partials/edit/bib/subject'"></section>

<!-- uncompleted marc debug -->
  <section ng-if="debug && record._marcUncompleted" class="unknown" ng-include="'/partials/edit/bib/unknown'"></section>

  <div class="footer footer-sticky">
    <div class="centered">
      <div class="row">
        <div class="col-md-4">
          <div class="holding">
            <button data-ng-disabled="!modifications.bib.published" class="btn btn-purple btn-hld" data-ng-controller="ModalCtrl" data-ng-click="openHoldingsModal($event, record)">
              <span data-ng-if="!hasHolding"><i class="fa fa-inverse fa-plus"></i> Lägg till bestånd</span>
              <span data-ng-if="hasHolding"><i class="fa fa-inverse fa-check"></i> Ändra i bestånd</span>
            </button>
          </div>
        </div>
        <div class="col-md-8 right">  
          <a data-ng-controller="ModalCtrl" data-ng-click="openMARCModal($event, record)">Förhandsgranska MARC</a> | 
          <span data-ng-show="record.modified" class="bib-edit-modified">{{record.draft ? 'Sparad' : 'Publicerad'}}: {{record.modified | timeAgo:60*60*24}} | </span>
          <a id="save-draft" data-ng-click="saveDraft()" title="{{lastSavedLabel('Senast sparad: %s')}}">Spara utkast</a> &nbsp;
          <button class="btn btn-dark" id="publish-bib" data-ng-class="classes.publishStatus" data-ng-disabled="subform.$invalid || modifications.bib.published" data-ng-click="publish()" title="{{lastPublishedLabel('Senast publicerad: %s')}}">
            <span data-ng-if="!modifications.bib.published" class="kitin-popover-trigger" kitin-popover="Det gick inte att publicera posten." kitin-popover-title="Något gick fel" kitin-popover-placement="top">{{ 'Publicera' }}</span>
            <span data-ng-if="modifications.bib.published" class="kitin-popover-trigger" kitin-popover="Posten finns nu registrerad i katalogen." kitin-popover-title="Publiceringen lyckades" kitin-popover-placement="top">{{ 'Publicerad' }} <i class="fa fa-check"></i></span>
          </button>
        </div>
      </div>
    </div>
  </div>

</ng-form>
